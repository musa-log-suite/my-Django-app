{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Wallet Dashboard Report</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      color: #333;
      background: url("{% static 'watermark.png' %}") no-repeat center center fixed;
      background-size: 300px;
      opacity: 0.98;
    }

    .header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #1976d2;
      padding-bottom: 1rem;
    }

    .header img {
      width: 60px;
      border-radius: 4px;
    }

    .header h1 {
      color: #1976d2;
      font-size: 1.8rem;
      margin: 0;
    }

    .summary {
      border: 1px solid #ccc;
      background-color: #eef6ff;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }

    .summary h2 {
      margin-top: 0;
      font-size: 1.2rem;
      color: #1976d2;
    }

    .section {
      margin-bottom: 1.5rem;
    }

    .section h2 {
      font-size: 1.2rem;
      margin-bottom: 0.3rem;
      color: #444;
    }

    .metrics {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
    }

    .metrics div {
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f9f9f9;
      flex: 1 1 30%;
    }

    ul {
      list-style-type: disc;
      margin-left: 1rem;
    }

    .signature {
      margin-top: 2rem;
      padding: 1rem;
      border-top: 1px solid #ccc;
      font-size: 0.9rem;
      color: #444;
    }

    footer {
      margin-top: 2rem;
      font-size: 0.8rem;
      text-align: center;
      color: #666;
      border-top: 1px solid #ccc;
      padding-top: 1rem;
    }
  </style>
</head>
<body>

  <!-- Branding Header -->
  <div class="header">
    <img src="{% static 'logo.jpeg' %}" alt="Company Logo">
    <h1>Wallet Management System</h1>
  </div>

  <!-- Executive Summary -->
  <div class="summary">
    <h2>Executive Summary</h2>
    <p>
      Between <strong>{{ start_date }}</strong> and <strong>{{ end_date }}</strong>, the system recorded
      <strong>{{ range_count }}</strong> transactions totaling â‚¦<strong>{{ range_volume }}</strong>.
      The platform maintains <strong>{{ total_wallets }}</strong> active wallets with a combined balance
      of â‚¦<strong>{{ total_balance }}</strong>. Activity today includes <strong>{{ today_count }}</strong>
      transactions amounting to â‚¦<strong>{{ today_volume }}</strong>.
    </p>
  </div>

  <p>ðŸ“… <strong>Reporting Range:</strong> {{ start_date }} to {{ end_date }}</p>

  <!-- Key Metrics -->
  <div class="section metrics">
    <div>
      <h2>Total Wallets</h2>
      <p>{{ total_wallets }}</p>
    </div>
    <div>
      <h2>Total Balance</h2>
      <p>â‚¦{{ total_balance }}</p>
    </div>
    <div>
      <h2>Transactions</h2>
      <p>{{ range_count }} total</p>
      <p>Volume: â‚¦{{ range_volume }}</p>
    </div>
  </div>

  <!-- Today's Activity -->
  <div class="section">
    <h2>Todayâ€™s Activity</h2>
    <ul>
      <li>Transactions: {{ today_count }}</li>
      <li>Volume: â‚¦{{ today_volume }}</li>
    </ul>
  </div>

  <!-- Daily Volume Chart -->
  {% if chart_url %}
    <div class="section">
      <h2>Daily Volume Chart</h2>
      <img src="{{ chart_url }}" alt="Chart" width="600">
    </div>
  {% else %}
    <div class="section">
      <h2>Daily Volume Chart</h2>
      <p><em>No chart available for this range.</em></p>
    </div>
  {% endif %}

  <!-- Signature Block -->
  <div class="signature">
    Report generated by <strong>Musa</strong> on {{ now|date:"F j, Y, g:i a" }}.<br>
    Contact: <a href="mailto:musa@example.com">musa@example.com</a>
  </div>

  <!-- Footer -->
  <footer>
    Wallet Management System â€“ Insight at a Glance
  </footer>

</body>
</html>